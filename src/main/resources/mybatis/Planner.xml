<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace속성:매퍼파일의 완전한경로 .xml는 생략 -->
<!-- ※ibatis와는 다르게 id값에 .(dot)를 사용 못한다. -->
<mapper namespace="mybatis.Planner">
	<insert id="insertPlanner" parameterType="java.lang.String">
		INSERT INTO PLANNER VALUES(seq_planner.nextval,0,#{id})
	</insert>
	<insert id="insertCities" parameterType="int">
		INSERT INTO cities VALUES(seq_cities.nextval,#{city_no},#{planner_no})
	</insert>
	<select id="selectPlannerList" parameterType="int" resultType="int">
		SELECT city_no from cities WHERE planner_no=#{planner_no}
	</select>
	<select id="selectPlannerNo" resultType="int">
		select seq_planner.currval from dual
	</select>
	<select id="selectCitiesDTOList" parameterType="int" resultType="CitiesDTO">
		SELECT * FROM CITIES WHERE PLANNER_NO=#{planner_no}
	</select>
	<select id="selectCitiesNo" resultType="int">
		select seq_cities.currval from dual
	</select>
	<insert id="insertPlan"  parameterType="java.util.Map">
		Insert into plan VALUES(seq_plan.nextval,#{plan_date},#{cities_no})
	</insert>
	<select id="selectPlanNo" resultType="int">
		select seq_plan.currval from dual
	</select>
	<select id="selectCitiesNoByMap" parameterType="java.util.Map" resultType="int">
		SELECT cities_no FROM cities WHERE city_no=#{city_no} and planner_no=#{planner_no}
	</select>
	<select id="selectPlanNoByCitiesNo" parameterType="int" resultType="int">
		SELECT plan_no FROM plan WHERE cities_no=#{cities_no}
	</select>
</mapper>